rg4js("apiKey","5HU2mFdkS/e5Tur8l31gcA==");rg4js("attach",true);rg4js("enablePulse",true);Parse.initialize("Ih70t530LwJAnRJungwuPtE2nE3eakzmwVuZHb6O","sE6Y6iMcoTTa9Z3pBCaAtwnD9F1L9SlWHBKlDQ7h");if(Parse.User.current()==null){location="login.html"}var Habit=Parse.Object.extend("Habit");var defaultImage=Parse.Object.extend("DefaultImages");function addAlarmToList(d){var c=document.getElementById("alarm-list");var b=document.querySelector("#alarm");var e=document.importNode(b.content,true);e.querySelector(".alarm-name").textContent="Alarm "+d;var a=c.appendChild(e)}$("input[type='radio']").click(function(){var a=$(this).attr("previousValue");var c=$(this).attr("name");var b=$(this).val();if(a=="checked"){$(this).removeAttr("checked");$(this).attr("previousValue",false)}else{$("input[name="+c+"]:radio").attr("previousValue",false);$(this).attr("previousValue","checked")}var f=document.getElementById("others");f.value="";if(b=="one"){b=1}else{if(b=="two"){b=2}else{if(b=="three"){b=3}}}$("#alarm-list").empty();var e=document.getElementById("myonoffswitch");if(e.checked){for(var d=1;d<=b;d++){addAlarmToList(d)}}});$("#others").change(function(d){$("input[type='radio']").removeAttr("checked");$("#alarm-list").empty();if($("#others").val()<10&&$("#others").val()%1==0&&$("#others").val()>0){var a;a=$("#others").val();var c=document.getElementById("myonoffswitch");if(c.checked){for(var b=1;b<=a;b++){addAlarmToList(b)}}}});function switchNotification(){var c=document.getElementById("myonoffswitch");$("#alarm-list").empty();if(c.checked){var a;if(document.getElementById("once").checked){a=1;for(var b=1;b<=a;b++){addAlarmToList(b)}}else{if(document.getElementById("twice").checked){a=2;for(var b=1;b<=a;b++){addAlarmToList(b)}}else{if(document.getElementById("thrice").checked){a=3;for(var b=1;b<=a;b++){addAlarmToList(b)}}else{if($("#others").val()<10&&$("#others").val()%1==0&&$("#others").val()>0){a=$("#others").val();for(var b=1;b<=a;b++){addAlarmToList(b)}}}}}}}function selectImage(a){document.getElementById("icon1").style.border="none";document.getElementById("icon1").className="icon";document.getElementById("icon2").style.border="none";document.getElementById("icon2").className="icon";document.getElementById("icon3").style.border="none";document.getElementById("icon3").className="icon";document.getElementById("myImg").style.border="none";document.getElementById("myImg").className="icon";var b=document.getElementById(a);b.style.border="5px solid #42A5F5";b.className=b.className+" selectedIcon";fileName=a}function validateForm(){var b=false;var d=false;var c=false;var a=false;if(document.getElementById("title").value==""){document.getElementById("title").style.border="1px solid";document.getElementById("title").style.borderColor="#b94a48"}else{document.getElementById("title").style.border="2px inset";b=true}if($("#icon1, #icon2, #icon3, #myImg").hasClass("selectedIcon")){document.getElementById("noTitle").style.display="none";d=true}else{document.getElementById("noTitle").style.display="block"}if(document.getElementById("isSun").checked){document.getElementById("isSun").className+=" selectedDay"}else{document.getElementById("isSun").className=""}if(document.getElementById("isMon").checked){document.getElementById("isMon").className+=" selectedDay"}else{document.getElementById("isMon").className=""}if(document.getElementById("isTues").checked){document.getElementById("isTues").className+=" selectedDay"}else{document.getElementById("isTues").className=""}if(document.getElementById("isWed").checked){document.getElementById("isWed").className+=" selectedDay"}else{document.getElementById("isWed").className=""}if(document.getElementById("isThurs").checked){document.getElementById("isThurs").className+=" selectedDay"}else{document.getElementById("isThurs").className=""}if(document.getElementById("isFri").checked){document.getElementById("isFri").className+=" selectedDay"}else{document.getElementById("isFri").className=""}if(document.getElementById("isSat").checked){document.getElementById("isSat").className+=" selectedDay"}else{document.getElementById("isSat").className=""}if($("#isSun, #isMon, #isTues, #isWed, #isThurs, #isFri, #isSat").hasClass("selectedDay")){document.getElementById("noFrequency").style.display="none";c=true}else{document.getElementById("noFrequency").style.display="block"}if(document.getElementById("once").checked){document.getElementById("once").className+=" selectedTimesADay"}else{document.getElementById("once").className=""}if(document.getElementById("twice").checked){document.getElementById("twice").className+=" selectedTimesADay"}else{document.getElementById("twice").className=""}if(document.getElementById("thrice").checked){document.getElementById("thrice").className+=" selectedTimesADay"}else{document.getElementById("thrice").className=""}if($("#once, #twice, #thrice").hasClass("selectedTimesADay")&&$("#others").val()!=""){document.getElementById("selectedBothFrequencies").style.display="block";document.getElementById("noDailyFrequency").style.display="none";document.getElementById("others").style.border="2px inset"}else{if(($("#once, #twice, #thrice").hasClass("selectedTimesADay")&&$("#others").val()=="")||(!($("#once, #twice, #thrice").hasClass("selectedTimesADay"))&&$("#others").val()!=""&&$("#others").val()<10&&$("#others").val()%1==0)){document.getElementById("selectedBothFrequencies").style.display="none";document.getElementById("noDailyFrequency").style.display="none";document.getElementById("others").style.border="2px inset";a=true}else{document.getElementById("others").style.border="1px solid";document.getElementById("others").style.borderColor="#b94a48";document.getElementById("noDailyFrequency").style.display="block";document.getElementById("selectedBothFrequencies").style.display="none"}}if(b&&d&&c&&a){addHabit()}}function hasClass(b,a){return(" "+b.className+" ").indexOf(" "+a+" ")>-1}function addHabit(){var e=new Habit();var g=Parse.User.current();e.set("username",g.get("username"));e.set("name",document.getElementById("title").value);e.set("onSunday",document.getElementById("isSun").checked);e.set("onMonday",document.getElementById("isMon").checked);e.set("onTuesday",document.getElementById("isTues").checked);e.set("onWednesday",document.getElementById("isWed").checked);e.set("onThursday",document.getElementById("isThurs").checked);e.set("onFriday",document.getElementById("isFri").checked);e.set("onSaturday",document.getElementById("isSat").checked);e.set("currStreak",0);e.set("bestStreak",0);var c=new Date();var s=c.getUTCMonth()+1;var m=c.getUTCDate();var f=c.getUTCFullYear();e.set("currDate",s+"/"+m+"/"+f);e.set("currDay",c.getDay());var r=document.getElementById("others").value;var h;if(!(r==null||r=="")){h=Number(r)}else{if(document.getElementById("once").checked){h=1}else{if(document.getElementById("twice").checked){h=2}else{if(document.getElementById("thrice").checked){h=3}}}}e.set("frequency",h);e.set("numCompleted",0);e.set("thumbCtr",0);var p=[];var o="";var k="";var a=document.getElementById("alarm-list");var j=a.getElementsByTagName("li");for(var n=0;n<j.length;++n){o=parseInt(j[n].querySelector("#hr1").value);k=parseInt(j[n].querySelector("#min1").value);o=o%12;if(j[n].querySelector("#am1").value=="pm"){o+=12}o=("0"+o).slice(-2);k=("0"+k).slice(-2);p.push(o+":"+k)}e.set("alarms",p);var l;var d;if(hasClass(document.getElementById("icon1"),"selectedIcon")){l="icon1";d="0JrjvKGnbG"}else{if(hasClass(document.getElementById("icon2"),"selectedIcon")){l="icon2";d="zgGDtotXrU"}else{if(hasClass(document.getElementById("icon3"),"selectedIcon")){l="icon3";d="qww3v520kk"}else{if(hasClass(document.getElementById("myImg"),"selectedIcon")){l="userUpload";d="none"}}}}e.set("defaultIconID",d);if(l=="icon1"||l=="icon2"||l=="icon3"){var b=new Parse.Query(defaultImage);b.get(d,{success:function(i){e.set("icon",i.get("icon"));e.save(null,{success:function(x){var w={frequency:h.toString()};Parse.Analytics.track("addhabit",w);location="list.html"},error:function(x,w){alert("Failed to create new object, with error code: "+w.message)}})},error:function(w,i){}})}else{if(l=="userUpload"){var v=$("#iconFileUpload")[0];if(v.files.length>0){var q=v.files[0];var u="icon.jpg";var t=new Parse.File(u,q)}t.save().then(function(){},function(i){});e.set("icon",t);e.save(null,{success:function(w){var i={frequency:h.toString()};Parse.Analytics.track("addhabit",i);location="list.html"},error:function(w,i){alert("Failed to create new object, with error code: "+i.message)}})}}}function uploadIcon(){var b=document.getElementById("myFile");var a="";if("files" in b){if(b.files.length==0){a="Select one or more files."}else{for(var d=0;d<b.files.length;d++){a+="<br><strong>"+(d+1)+". file</strong><br>";var c=b.files[d];if("name" in c){a+="name: "+c.name+"<br>"}if("size" in c){a+="size: "+c.size+" bytes <br>"}}}}else{if(b.value==""){a+="Select one or more files."}else{a+="The files property is not supported by your browser!";a+="<br>The path of the selected file: "+b.value}}}$(function(){$(":file").change(function(){if(this.files&&this.files[0]){var a=new FileReader();a.onload=imageIsLoaded;a.readAsDataURL(this.files[0])}})});function imageIsLoaded(a){$(".hide").css("display","inline-block");$("#myImg").attr("src",a.target.result);selectImage("myImg")}$(window).resize(function(){if($(".hide").css("display")!="none"){if($("#form").width()<360){$(".hide").css("display","block");$(".hide").css("position","relative")}else{$(".hide").css("position","absolute");$(".hide").css("display","inline-block");var a=document.getElementById("addForm");var b=a.innerHTML;a.innerHTML=b}}});