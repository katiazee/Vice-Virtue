rg4js("apiKey","5HU2mFdkS/e5Tur8l31gcA==");rg4js("attach",true);rg4js("enablePulse",true);Parse.initialize("Ih70t530LwJAnRJungwuPtE2nE3eakzmwVuZHb6O","sE6Y6iMcoTTa9Z3pBCaAtwnD9F1L9SlWHBKlDQ7h");if(Parse.User.current()==null){location="login.html"}var Habit=Parse.Object.extend("Habit");var defaultImage=Parse.Object.extend("DefaultImages");function addAlarmToList(d){var c=document.getElementById("alarm-list");var b=document.querySelector("#alarm");var e=document.importNode(b.content,true);g;e.querySelector(".alarm-name").textContent="Alarm "+d;var a=c.appendChild(e)}$("input[type='radio']").click(function(){var a=$(this).attr("previousValue");var c=$(this).attr("name");var b=$(this).val();if(a=="checked"){$(this).removeAttr("checked");$(this).attr("previousValue",false)}else{$("input[name="+c+"]:radio").attr("previousValue",false);$(this).attr("previousValue","checked")}var f=document.getElementById("others");f.value="";if(b=="one"){b=1}else{if(b=="two"){b=2}else{if(b=="three"){b=3}}}$("#alarm-list").empty();var e=document.getElementById("myonoffswitch");if(e.checked){for(var d=1;d<=b;d++){addAlarmToList(d)}}});$("#others").change(function(d){$("input[type='radio']").removeAttr("checked");$("#alarm-list").empty();if($("#others").val()<10&&$("#others").val()%1==0&&$("#others").val()>0){var a;a=$("#others").val();var c=document.getElementById("myonoffswitch");if(c.checked){for(var b=1;b<=a;b++){addAlarmToList(b)}}}});function switchNotification(){var c=document.getElementById("myonoffswitch");$("#alarm-list").empty();if(c.checked){var a;if(document.getElementById("once").checked){a=1;for(var b=1;b<=a;b++){addAlarmToList(b)}}else{if(document.getElementById("twice").checked){a=2;for(var b=1;b<=a;b++){addAlarmToList(b)}}else{if(document.getElementById("thrice").checked){a=3;for(var b=1;b<=a;b++){addAlarmToList(b)}}else{if($("#others").val()<10&&$("#others").val()%1==0&&$("#others").val()>0){a=$("#others").val();for(var b=1;b<=a;b++){addAlarmToList(b)}}}}}}}function selectImage(a){document.getElementById("icon1").style.border="none";document.getElementById("icon1").className="icon";document.getElementById("icon2").style.border="none";document.getElementById("icon2").className="icon";document.getElementById("icon3").style.border="none";document.getElementById("icon3").className="icon";document.getElementById("myImg").style.border="none";document.getElementById("myImg").className="icon";var b=document.getElementById(a);b.style.border="5px solid #42A5F5";b.className=b.className+" selectedIcon";fileName=a}function validateForm(){var b=false;var d=false;var c=false;var a=false;if(document.getElementById("title").value==""){document.getElementById("title").style.border="1px solid";document.getElementById("title").style.borderColor="#b94a48"}else{document.getElementById("title").style.border="2px inset";b=true}if($("#icon1, #icon2, #icon3, #myImg").hasClass("selectedIcon")){document.getElementById("noTitle").style.display="none";d=true}else{document.getElementById("noTitle").style.display="block"}if(document.getElementById("isSun").checked){document.getElementById("isSun").className+=" selectedDay"}else{document.getElementById("isSun").className=""}if(document.getElementById("isMon").checked){document.getElementById("isMon").className+=" selectedDay"}else{document.getElementById("isMon").className=""}if(document.getElementById("isTues").checked){document.getElementById("isTues").className+=" selectedDay"}else{document.getElementById("isTues").className=""}if(document.getElementById("isWed").checked){document.getElementById("isWed").className+=" selectedDay"}else{document.getElementById("isWed").className=""}if(document.getElementById("isThurs").checked){document.getElementById("isThurs").className+=" selectedDay"}else{document.getElementById("isThurs").className=""}if(document.getElementById("isFri").checked){document.getElementById("isFri").className+=" selectedDay"}else{document.getElementById("isFri").className=""}if(document.getElementById("isSat").checked){document.getElementById("isSat").className+=" selectedDay"}else{document.getElementById("isSat").className=""}if($("#isSun, #isMon, #isTues, #isWed, #isThurs, #isFri, #isSat").hasClass("selectedDay")){document.getElementById("noFrequency").style.display="none";c=true}else{document.getElementById("noFrequency").style.display="block"}if(document.getElementById("once").checked){document.getElementById("once").className+=" selectedTimesADay"}else{document.getElementById("once").className=""}if(document.getElementById("twice").checked){document.getElementById("twice").className+=" selectedTimesADay"}else{document.getElementById("twice").className=""}if(document.getElementById("thrice").checked){document.getElementById("thrice").className+=" selectedTimesADay"}else{document.getElementById("thrice").className=""}if($("#once, #twice, #thrice").hasClass("selectedTimesADay")&&$("#others").val()!=""){document.getElementById("selectedBothFrequencies").style.display="block";document.getElementById("noDailyFrequency").style.display="none";document.getElementById("others").style.border="2px inset"}else{if(($("#once, #twice, #thrice").hasClass("selectedTimesADay")&&$("#others").val()=="")||(!($("#once, #twice, #thrice").hasClass("selectedTimesADay"))&&$("#others").val()!=""&&$("#others").val()<10&&$("#others").val()%1==0)){document.getElementById("selectedBothFrequencies").style.display="none";document.getElementById("noDailyFrequency").style.display="none";document.getElementById("others").style.border="2px inset";a=true}else{document.getElementById("others").style.border="1px solid";document.getElementById("others").style.borderColor="#b94a48";document.getElementById("noDailyFrequency").style.display="block";document.getElementById("selectedBothFrequencies").style.display="none"}}if(b&&d&&c&&a){addHabit()}}function hasClass(b,a){return(" "+b.className+" ").indexOf(" "+a+" ")>-1}function addHabit(){var e=new Habit();var h=Parse.User.current();e.set("username",h.get("username"));e.set("name",document.getElementById("title").value);e.set("onSunday",document.getElementById("isSun").checked);e.set("onMonday",document.getElementById("isMon").checked);e.set("onTuesday",document.getElementById("isTues").checked);e.set("onWednesday",document.getElementById("isWed").checked);e.set("onThursday",document.getElementById("isThurs").checked);e.set("onFriday",document.getElementById("isFri").checked);e.set("onSaturday",document.getElementById("isSat").checked);e.set("currStreak",0);e.set("bestStreak",0);var c=new Date();var t=c.getUTCMonth()+1;var n=c.getUTCDate();var f=c.getUTCFullYear();e.set("currDate",t+"/"+n+"/"+f);e.set("currDay",c.getDay());var s=document.getElementById("others").value;var j;if(!(s==null||s=="")){j=Number(s)}else{if(document.getElementById("once").checked){j=1}else{if(document.getElementById("twice").checked){j=2}else{if(document.getElementById("thrice").checked){j=3}}}}e.set("frequency",j);e.set("numCompleted",0);e.set("thumbCtr",0);var q=[];var p="";var l="";var a=document.getElementById("alarm-list");var k=a.getElementsByTagName("li");for(var o=0;o<k.length;++o){p=parseInt(k[o].querySelector("#hr1").value);l=parseInt(k[o].querySelector("#min1").value);p=p%12;if(k[o].querySelector("#am1").value=="pm"){p+=12}p=("0"+p).slice(-2);l=("0"+l).slice(-2);q.push(p+":"+l)}e.set("alarms",q);var m;var d;if(hasClass(document.getElementById("icon1"),"selectedIcon")){m="icon1";d="0JrjvKGnbG"}else{if(hasClass(document.getElementById("icon2"),"selectedIcon")){m="icon2";d="zgGDtotXrU"}else{if(hasClass(document.getElementById("icon3"),"selectedIcon")){m="icon3";d="qww3v520kk"}else{if(hasClass(document.getElementById("myImg"),"selectedIcon")){m="userUpload";d="none"}}}}e.set("defaultIconID",d);if(m=="icon1"||m=="icon2"||m=="icon3"){var b=new Parse.Query(defaultImage);b.get(d,{success:function(i){e.set("icon",i.get("icon"));e.save(null,{success:function(x){location="list.html"},error:function(y,x){alert("Failed to create new object, with error code: "+x.message)}})},error:function(x,i){}})}else{if(m=="userUpload"){var w=$("#iconFileUpload")[0];if(w.files.length>0){var r=w.files[0];var v="icon.jpg";var u=new Parse.File(v,r)}u.save().then(function(){},function(i){});e.set("icon",u);e.save(null,{success:function(i){location="list.html"},error:function(x,i){alert("Failed to create new object, with error code: "+i.message)}})}}}function uploadIcon(){var b=document.getElementById("myFile");var a="";if("files" in b){if(b.files.length==0){a="Select one or more files."}else{for(var d=0;d<b.files.length;d++){a+="<br><strong>"+(d+1)+". file</strong><br>";var c=b.files[d];if("name" in c){a+="name: "+c.name+"<br>"}if("size" in c){a+="size: "+c.size+" bytes <br>"}}}}else{if(b.value==""){a+="Select one or more files."}else{a+="The files property is not supported by your browser!";a+="<br>The path of the selected file: "+b.value}}}$(function(){$(":file").change(function(){if(this.files&&this.files[0]){var a=new FileReader();a.onload=imageIsLoaded;a.readAsDataURL(this.files[0])}})});function imageIsLoaded(a){$(".hide").css("display","inline-block");$("#myImg").attr("src",a.target.result);selectImage("myImg")}$(window).resize(function(){if($(".hide").css("display")!="none"){if($("#form").width()<360){$(".hide").css("display","block");$(".hide").css("position","relative")}else{$(".hide").css("position","absolute");$(".hide").css("display","inline-block");var a=document.getElementById("addForm");var b=a.innerHTML;a.innerHTML=b}}});